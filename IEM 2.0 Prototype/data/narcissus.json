{
	"doctype": "IEM Event List",
	"author": "David B Wetzel",
	"date": "2017",
	"comments" : "new realization in IEM 2.0 with JSON-based event list",
	"meta": {
		"composer": "Thea Musgrave",
		"title": "Narcissus",
		"subtitle" : "for flute or B-flat clarinet and digital delay",
		"year": "1987",
		"commission": "NEA Consortium Commissioning Grant",
		"note": "Originally realized using the Vesta Kaza DIG411. IEM realization based on 2004 DMA dissertation"
	},
	"setup": {
		"modules": [
		{
			"file": "mixer.iem.maxpat",
			"name": "Nmix",
			"comments": "Handles both audio routing and spatialization tasks"
		}, {
			"file": "delay.iem.maxpat",
			"name": "Ndelay",
			"comments": "standardized delay processor"
		}, {
			"file": "VKDIG411.iem.maxpat",
			"name": "VK411",
			"comments": "VK DIG411 interface translator for standardized delay"
		}, {
			"file": "MIDIcontroller.iem.maxpat",
			"name": "Npedals",
			"comments": "MIDI foot pedal manager"
		}, {
			"file": "ramp.iem.maxpat",
			"name": "Nvol",
			"comments": "Automated volume control"
		}],
		"init": [
		{
			"comments": "set inputs, outputs, and levels",
			"name": "Nmix",
			"parameters": {
				"in~": {
					"1": "ADC[0]",
					"2": "ADC[0]",
					"3": "Ndelay~"
				},
				"trim": {
					"1": 0.8,
					"2": 0.8,
					"3": 1.0
				},
				"fader": {
					"1": 0.8,
					"2": 0.8
				},
				"pan" : {
					"1": 0,
					"2": 127
				},
				"out~" : {
					"1": "DAC[0]",
					"2": "DAC[1]"
				}
			}
		}, {
			"comments" : "set input to Mic 1; set external controls",
			"name": "Ndelay",
			"parameters": {
				"in~": "ADC[0]",
				"out~" : "Ndelay~",
				"trim" : 127,
				"gain" : 127,
				"dry" : 127,
				"bypass" : 1,
				"hold" : 0,
				"time" : 512,
				"speed" : 0,
				"depth" : 0,
				"in-cc": {
					"comments" : "receive from VK emulator",
					"time": "VKtime",
					"fb": "VKfb",
					"depth": "VKdepth",
					"LFOspeed": "VKspeed",
					"hold": "VKhold",
					"bypass" : "VKbypass",
					"gain" : "VKvol",
					"trim" : "VKinput",
					"dry" : "VKdry"
				}
			}
		}, {		
			"comments" : "Set up DIG411 emulator",
			"name": "VK411",
			"parameters": {
				"input" : 10,
				"range" : 512,
				"time" : 0.5,
				"dry" : 10,
				"volume" : 9,
				"input" : 9,
				"fb" : 0,
				"speed" : 0.1,
				"depth" : 0,
				"bypass" : 1,
				"in-cc" : {
					"comments" : "control VK interface from MIDI pedals",
					"vol" : "vPedal",
					"hold" : "sustain",
					"bp" : "modwheel"
				},
				"out-cc" : {
					"comments" : "send control data to delay module",
					"vol" : "VKvol",
					"dry" : "VKdry",
					"hold" : "VKhold",
					"time" : "VKtime",
					"depth" : "VKdepth",
					"speed" : "VKspeed",
					"fb" : "VKfb",
					"trim" : "VKtrim",
					"bypass" : "VKbp"
				}
			}
		}, 
		{
			"comments" : "assign & setup MIDI foot pedals",
			"name": "Npedals",
			"parameters": {
				"cc" : {
					"1" : 61,
					"2" : 62,
					"3" : 63,
					"4" : 64,
					"5" : 65
				},
				"chan" : {
					"1" : 1,
					"2" : 1,
					"3" : 1,
					"4" : 1,
					"5" : 1
				},
				"out" : {
					"1" : "step",
					"2" : "sustain",
					"3" : "sustain",
					"4" : "autovol"
				},
				"mode" : {
					"1" : 2,
					"2" : 0,
					"3" : 0,
					"4" : 2
				},
				"polarity" : {
					"4" : 1
				}
			}
		},
		{
			"name" : "Nvol",
			"parameters" : {
				"out" : "volpedal",
				"trigger" : 127,
				"in-cc" : {
					"trigger" : "autovol"
				}
			}
		},
		{
			"comments" : "set next pedal",
			"name" : "main",
			"parameters": {
			}
			
		}
		]
	},
	"sequences": {
		"soundcheck" : [{}, {}, {}],
		"performance": [
		{
			"comments": "Event 1 - m. 1",
			"modules": [
			{
				"comments" : "initialize the system"
				"name": "main",
				"parameters": {
					"event" : "init"
				}
			}, 
			{
				"name": "ISPW-mix",
				"parameters": {}
			}
			]
		}, 
		{
			"comments": "event 2",
			"modules": [{
				"name": "ISPW-sampler",
				"parameters": {}
			}, {
				"name": "ISPW-mix",
				"parameters": {}
			}]
		}, 
		{
			"comments": "event 3",
			"modules": [{
				"name": "ISPW-sampler",
				"parameters": {}
			}, {
				"name": "ISPW-mix",
				"parameters": {}
			}]
		}, 
		{
			"comments": "event 4",
			"modules": [{
				"name": "ISPW-sampler",
				"parameters": {}
			}, {
				"name": "ISPW-mix",
				"parameters": {}
			}]
		}, 
		{
			"comments": "event 5",
			"modules": [{
				"name": "ISPW-sampler",
				"parameters": {}
			}, {
				"name": "ISPW-mix",
				"parameters": {}
			}]
		}
		]
	}


}